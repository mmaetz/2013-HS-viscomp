\raggedbottom
%\usepackage{times}
%\usepackage{pifont}
%\quad ,\\% Memoir layout setup

%% NOTE: You are strongly advised not to change any of them unless you
%% know what you are doing.  These settings strongly interact in the
%% final look of the document.

% Dependencies
\usepackage{array}

% Define the default sans serif font as the lighter computer modern bright by
% D. Knuth.
%\renewcommand{\sfdefault}{cmbr}
%%% colors
\def\saturation{200}
\def\brightness{170}
\definecolor{chapterlinecolor}{HSB}{250,\saturation,\brightness}
\definecolor{sectionlinecolor}{HSB}{166,\saturation,\brightness}
\definecolor{subsectionlinecolor}{HSB}{80,\saturation,\brightness}
\colorlet{test}{subsectionlinecolor}

%%% Define a nice orange color and use it for hyperref
%%% Needs xcolor
\usepackage{xcolor}
\definecolor{rioday}{RGB}{255,166,0} 
\hypersetup{colorlinks=false,linkbordercolor=chapterlinecolor}


% Turn extra space before chapter headings off.

% Chapter style redefinition
\makeatletter
\newcommand\thickhrulefill{\leavevmode \leaders%
\hrule height 6.25pt depth -3.25pt \hfill \kern \z@}

\let\old@rule\@rule
\def\@rule[#1]#2#3{\textcolor{rulecolor}{\old@rule[#1]{#2}{#3}}}
\newcommand{\colorhrule}[3]{%
	\begingroup\color{#1}\hrule height #2 width #3\endgroup
}%
\makechapterstyle{test}{
	\setlength\midchapskip{0.0em}
	\setlength\afterchapskip{0.2em}
	\setlength\beforechapskip{0.0em}
	%\setlength\beforesecskip{0cm}
	%\setlength\aftersecskip{0cm}
	\renewcommand{\chapterheadstart}{\colorlet{rulecolor}{chapterlinecolor}\rule{\columnwidth}{1.5ex}%\vspace{-1pt}}
}
	\renewcommand{\printchaptername}{}
	%\renewcommand\colorchapnum{\color{\chapterlinecolor}}
	\renewcommand{\chapternamenum}{}
	\renewcommand{\chapnamefont}{\normalfont\footnotesize\bfseries}
	\renewcommand{\chaptitlefont}{\normalfont\footnotesize\bfseries}
	\renewcommand{\chapnumfont}{\normalfont\footnotesize\bfseries}
	\renewcommand{\printchapternum}{\chapnumfont\space\thechapter}
	\renewcommand{\afterchapternum}{\space}
	\renewcommand{\afterchaptertitle}{\par\nobreak\vspace{-1ex}\rule{\columnwidth}{0.4ex}\colorlet{rulecolor}{black}\vskip\afterchapskip}
}

%\titleformat{\section}{\normalfont\bfseries}{\thesection}{1em}{}
%\titlespacing*{\section}{0pt}{*0}{0pt}



% Set the way pages are layed out (headers and page numbering)
\pagestyle{empty}
%\if@twoside
  %\pagestyle{Ruled}
%\else
  %\pagestyle{ruled}
%\fi

% Use the newly defined style
%\chapterstyle{VZ14}
\chapterstyle{test}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Redefine sectional headings to contain rules
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\let\origsection\section
%\renewcommand\section{\@ifstar{\starsection}{\nostarsection}}
%\renewcommand{\section}{\@startsection{section}{1}{\z@}%
%{-2\baselineskip}{1em}
%	%{-3.5ex \@plus -1ex \@minus -.2ex}%
%	%{2.3ex \@plus.2ex}%
%	{%
%		\vspace{-2\baselineskip}
%	\textcolor{sectionlinecolor}{\hrule depth 1em}
%%\nolinebreak[4]
%	%
%\Large\bfseries\sffamily}}
%\let\origsection\section
%\renewcommand\section{\@ifstar{\starsection}{\nostarsection}}
%
%\newcommand\nostarsection[1]
%{\sectionprelude\origsection{#1}\sectionpostlude}
%%{\origsection{#1}\sectionpostlude}
%\newcommand\starsection[1]
%{\sectionprelude\origsection*{#1}\sectionpostlude}
%
%\newcommand\sectionprelude{%
%	%\vspace{-\baselineskip}
%	%\colorhrule{sectionlinecolor}{1em}{\columnwidth} 
%	%\vspace{-0.5\baselineskip}
%	}
%\newcommand\sectionpostlude{%
%	%\vspace{-0.5ex}
%	%\colorhrule{sectionlinecolor}{0.2em}{\columnwidth} 
%	%\vspace{0.5\baselineskip}
%}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Redefine subsectional headings to contain rules
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\renewcommand{\subsection}{\@startsection{subsection}{2}{\z@}%
%{-2\baselineskip}{0.5em}
%	%{-3.5ex \@plus -1ex \@minus -.2ex}%
%	%{2.3ex \@plus.2ex}%
%	{%
%	\vspace{-2\baselineskip}
%	\textcolor{subsectionlinecolor}{\hrule depth 0.5em}
%	%
%\Large\bfseries\sffamily}}
%
%\let\origsubsection\subsection
%\renewcommand\subsection{\@ifstar{\starsubsection}{\nostarsubsection}}
%
%\newcommand\nostarsubsection[1]
%{\subsectionprelude\origsubsection{#1}\subsectionpostlude}
%%{\origsubsection{#1}\subsectionpostlude}
%\newcommand\starsubsection[1]
%{\subsectionprelude\origsubsection*{#1}\subsectionpostlude}
%
%\newcommand\subsectionprelude{%
%	\vspace{\baselineskip}
%	%\colorhrule{subsectionlinecolor}{1em}{\columnwidth} 
%	%\vspace{-0.5\baselineskip}
%	}
%\newcommand\subsectionpostlude{%
%	\vspace{-0.2ex}
%	%\colorhrule{subsectionlinecolor}{0.1em}{\columnwidth} 
%	%\vspace{0.5\baselineskip}
%}
%

%\renewcommand{\subsection}{\@startsection{subsection}{2}{\z@}%
%{-2\baselineskip}{8pt}
%	{%
%	\vspace{\baselineskip}
%	\textcolor{subsectionlinecolor}{\hrule depth 5pt}
%	%
%\Large\bfseries\sffamily}}

%\titlespacing{\section}{\z@}{\z@}{\z@}

\setparaheadstyle{\normalsize\bfseries\sffamily}
\setsubparaheadstyle{\normalsize\bfseries\sffamily}

% Set captions to a more separated style for clearness
\captionnamefont{\sffamily\bfseries\footnotesize}
\captiontitlefont{\sffamily\footnotesize}
\setlength{\intextsep}{16pt}
\setlength{\belowcaptionskip}{1pt}

%%% Make a bit of additional space for footnotes
\addtolength{\skip\footins}{4pt}
\renewcommand{\footnoterule}{%
   \kern -7pt                   % call this kerna
   \hrule height 0.4pt width 0.4\columnwidth
   \kern 6.6pt                  % call this kernb
}

% Set section and TOC numbering depth to subsection
\setsecnumdepth{subsection}
\settocdepth{subsection}

% Turn off american style paragraph indentation and add some space to be
% printed when a new paragraph starts.

\setlength{\parindent}{0pt}
\addtolength{\parskip}{2pt}

\newcommand{\professor}[1]{\def\@professor{#1}}
\renewcommand{\maketitlehookb}%
{\vspace{2em}\centering\Large\@professor\vspace{0.3\textheight}}

%% This provides a frontend to set the lecture date into the header
%% The chapter names are usually shorter than the section names. So the date should be at this place.
\renewcommand{\footruleskip}{-5pt}
\makeatother

% This defines how theorems should look. Best leave as is.
%\theoremstyle{nonumberbreak}
%\theoremseparator{:\quad}
%\theoremprework{}
%\theoremindent2em
%\theoremheaderfont{\sffamily\bfseries}
%\theorembodyfont{\normalfont}
%\theoremsymbol{}

\expandafter\def\expandafter\normalsize\expandafter{%
%\normalsize
\small
\setlength\abovedisplayskip{0.5ex}
\setlength\belowdisplayskip{0.5ex}
\setlength\abovedisplayshortskip{0.25ex}
\setlength\belowdisplayshortskip{0.25ex}
}
\DeclareMathSizes{12}{9}{7}{5}

%%% paralist config
\pltopsep0.25ex
\plpartopsep0.25ex
\plitemsep0.25ex
\plparsep0.25ex
\setdefaultleftmargin{0pt}{0pt}{0pt}{0pt}{0pt}{0pt}

%%% Page layout
%%% My layout
%\setlength{\headheight}{0pt}
%\setlength{\headsep}{0pt}
%\setlength{\footskip}{0pt}
%\newcommand{\lrmargin}{0.25cm}
%\newcommand{\ulmargin}{0.25cm}
%\setstocksize{21.0cm}{29.7cm}
%\settrimmedsize{\stockheight}{\stockwidth}{*}
%%\settypeblocksize{\stockheight-\test*2}{\stockwidth-\margin*2}{*}
%%\setlrmargins{\margin}{*}{*}
%\setlrmarginsandblock{\lrmargin}{*}{*}
%%\setulmargins{\test}{*}{*}
%\setulmarginsandblock{\ulmargin}{*}{*}
%\setheadfoot{0pt}{4.39pt}
%\checkandfixthelayout
%% From the internet
%\pagestyle{plain}
%\setstocksize{21.0cm}{29.7cm}
\setlength{\trimtop}{0cm}
\setlength{\trimedge}{0cm}
\setlength{\evensidemargin}{0.0cm}
\setlength{\oddsidemargin}{0cm}
\setlength{\parindent}{0pt}
\setlength{\parskip}{0pt}
\setlength{\topmargin}{0cm}
\setlength{\uppermargin}{0cm}
\setlength{\lowermargin}{0cm}
\setlength{\headheight}{0cm}
\setlength{\headsep}{0cm}
\setlength{\footskip}{0pt}
\setlength{\spinemargin}{0cm}
\setlength{\foremargin}{0cm}
\setlength{\marginparwidth}{0cm}
\newcommand{\lrmargin}{0cm}
\newcommand{\ulmargin}{0cm}
\setlrmarginsandblock{\lrmargin}{\lrmargin}{*}
\setulmarginsandblock{-0.5pt}{\ulmargin}{*}
%\setlength{\marginsep}{0cm}
\setlength{\paperheight}{21.0cm}
\setlength{\paperwidth}{29.7cm}
\setlength{\stockheight}{\paperheight}
\setlength{\stockwidth}{\paperwidth}
\setlength{\textheight}{\stockheight-0.5pt}
\setlength{\textwidth}{\stockwidth}
\checkandfixthelayout
\setsecheadstyle{\colorhrule{sectionlinecolor}{1ex}{\columnwidth}\vspace{0.1em}\scriptsize\bfseries}
\setsubsecheadstyle{\colorhrule{subsectionlinecolor}{0.5ex}{\columnwidth}\vspace{0.05em}\tiny\bfseries}
\setparaheadstyle{\tiny\bfseries}
%\setsubsubsecheadstyle{\normalsize\scshape\raggedright}
\setbeforesecskip{-1.2ex plus -.25ex minus -.1ex}
\setaftersecskip{1ex plus .1ex}
\setbeforesubsecskip{-0.5ex plus -.125ex minus -.05ex}
\setaftersubsecskip{0.5ex plus .1ex}
\setbeforeparaskip{-0.5ex plus -.25ex minus -.1ex}
\setafterparaskip{0.5ex plus .1ex}

 \definecolor{mygreen}{rgb}{0,0.6,0}
 \definecolor{mygray}{rgb}{0.5,0.5,0.5}
 \definecolor{mymauve}{rgb}{0.58,0,0.82}

\lstset{ %
	otherkeywords={::},
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\tiny,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygreen},    % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  frame=single,                    % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{blue},       % keyword style
  language=matlab,                 % the language of the code
  morekeywords={*,...},            % if you want to add more keywords to the set
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{mymauve},     % string literal style
  tabsize=2,                       % sets default tabsize to 2 spaces
  title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}
